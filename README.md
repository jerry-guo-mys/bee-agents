# Bee ğŸ

[![Rust](https://img.shields.io/badge/Rust-2021-orange?logo=rust)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Version](https://img.shields.io/badge/Version-0.1.0-green.svg)](Cargo.toml)
[![Tests](https://img.shields.io/badge/Tests-96%20passed-brightgreen.svg)](src/lib.rs)

> é«˜æ€§èƒ½ã€å®‰å…¨ä¸”å…·å¤‡é•¿æœŸè®°å¿†çš„ Rust ä¸ªäººæ™ºèƒ½ä½“ç³»ç»Ÿ

Bee æ˜¯ä¸€ä¸ªåŸºäº ReAct æ¶æ„çš„æ™ºèƒ½ä½“ï¼Œæ”¯æŒå¤šå·¥å…·åä½œã€åˆ†å±‚è®°å¿†ç³»ç»Ÿã€æŠ€èƒ½æ’ä»¶ã€è‡ªæˆ‘è¿›åŒ–å’Œå¤šç§äº¤äº’ç•Œé¢ï¼ˆTUI/Web/WhatsApp/Lark/Gatewayï¼‰ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½ç¼–æ’**: ReAct å¾ªç¯ + Planner/Critic åŒæ ¸å¿ƒï¼Œè‡ªä¸»è§„åˆ’ä¸åæ€ï¼ˆ20 æ­¥ä¸Šé™é˜²æ­¢æ­»å¾ªç¯ï¼‰
- ğŸ§  **åˆ†å±‚è®°å¿†**: çŸ­æœŸå¯¹è¯ï¼ˆæ™ºèƒ½å‰ªæï¼‰+ ä¸­æœŸå·¥ä½œåŒº + é•¿æœŸæŒä¹…åŒ–è®°å¿†ï¼ˆå‘é‡æ£€ç´¢ + æ–‡ä»¶å­˜å‚¨ï¼‰
- ğŸ” **RAG æ£€ç´¢å¢å¼º**: æ–‡æ¡£åˆ†å—ã€æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ RRF èåˆï¼‰ã€ä¸Šä¸‹æ–‡å¢å¼ºç”Ÿæˆ
- ğŸ€„ **ä¸­æ–‡åˆ†è¯**: jieba-rs æ™ºèƒ½åˆ†è¯ï¼Œä¸­è‹±æ–‡æ··åˆæ£€ç´¢ä¼˜åŒ–
- ğŸ› ï¸ **ä¸°å¯Œå·¥å…·**: æ²™ç®±æ–‡ä»¶ç³»ç»Ÿã€Shell ç™½åå•ã€Web æœç´¢ã€ä»£ç è¯»å†™/å®¡æŸ¥/Git æ“ä½œã€æµè§ˆå™¨æ§åˆ¶
- ğŸ“š **æ·±åº¦ç ”ç©¶**: å¤šè½®è‡ªä¸»æœç´¢ã€ä¿¡æ¯æºéªŒè¯ã€çŸ¥è¯†å›¾è°±æ„å»ºã€ç»“æ„åŒ–æŠ¥å‘Šç”Ÿæˆ
- ğŸ­ **å¤šåŠ©æ‰‹ç³»ç»Ÿ**: å†…ç½®é€šç”¨åŠ©æ‰‹ã€è‡ªåª’ä½“åŠ©æ‰‹ã€å­¦ä¹ åŠ©æ‰‹ã€æé’±åŠ©æ‰‹ï¼Œå¯è‡ªå®šä¹‰æ‰©å±•
- ğŸ§© **æŠ€èƒ½ç³»ç»Ÿ**: TOML å®šä¹‰æŠ€èƒ½æ’ä»¶ï¼ˆæœç´¢/å†™ä½œ/çˆ†æ¬¾ç­‰ï¼‰ï¼ŒåŠ¨æ€åŠ è½½ä¸é€‰æ‹©
- ğŸ’¬ **å¤šç•Œé¢**: TUI ç»ˆç«¯ / Web æµè§ˆå™¨ / WhatsApp / é£ä¹¦ Lark / WebSocket ç½‘å…³
- ğŸ”Œ **å¤šæ¨¡å‹æ”¯æŒ**: DeepSeek / OpenAI / Claude / Gemini / Qwen / Kimi / GLM æ— ç¼åˆ‡æ¢ï¼Œå¤šæ¨¡å‹è·¯ç”±
- ğŸ”„ **è‡ªæˆ‘è¿›åŒ–**: ä»£ç è´¨é‡åˆ†æ â†’ æ”¹è¿›è§„åˆ’ â†’ è‡ªåŠ¨æ‰§è¡Œ â†’ Git æäº¤ï¼Œæ”¯æŒè°ƒåº¦ä¸å®¡æ‰¹
- ğŸ“‹ **ä»»åŠ¡ç®¡ç†**: ä»»åŠ¡é˜Ÿåˆ—ã€è°ƒåº¦å™¨ã€ä¼˜å…ˆçº§ç®¡ç†
- ğŸ“Š **å¯è§‚æµ‹æ€§**: Metrics é‡‡é›† + Prometheus æ ¼å¼å¯¼å‡º + Tracing Spans
- ğŸ”’ **å®‰å…¨æ²™ç®±**: å—é™æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€Shell å‘½ä»¤ç™½åå•ã€åŸŸåç™½åå•
- âš¡ **å¼‚æ­¥æ¶æ„**: å…¨å¼‚æ­¥ I/Oï¼Œæ”¯æŒ sqlx å¼‚æ­¥ SQLite æŒä¹…åŒ–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- [Rust](https://rustup.rs/) 1.70+ (`rustup default stable`)
- DeepSeek æˆ– OpenAI API Key

### å®‰è£…è¿è¡Œ

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repo-url>
cd bee

# 2. è®¾ç½® API Keyï¼ˆæ¨è DeepSeekï¼‰
export DEEPSEEK_API_KEY=sk-xxx

# 3. è¿è¡Œ
cargo run
```

> é¦–æ¬¡è¿è¡Œå°†è‡ªåŠ¨åˆ›å»º `workspace/` ç›®å½•å’Œé»˜è®¤é…ç½®ã€‚

---

## ğŸ–¥ï¸ ç•Œé¢é¢„è§ˆ

### TUI ç»ˆç«¯ç•Œé¢ï¼ˆé»˜è®¤ï¼‰
```bash
cargo run              # å¯åŠ¨ TUI
cargo run --release    # ç”Ÿäº§æ„å»º
```

**å¿«æ·é”®**:
| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Enter` | å‘é€æ¶ˆæ¯ |
| `Ctrl+C` | å–æ¶ˆå½“å‰ç”Ÿæˆ |
| `Ctrl+L` | æ¸…ç©ºå¯¹è¯ |
| `Ctrl+Q` | é€€å‡º |

### Web ç•Œé¢
```bash
cargo run --bin bee-web --features web
```
è®¿é—® http://127.0.0.1:8080

### WhatsApp é›†æˆ
```bash
cargo run --bin bee-whatsapp --features whatsapp
```
> éœ€è¦å…¬ç½‘ Webhook å›è°ƒåŸŸåï¼ˆæœ¬åœ°å¯ç”¨ ngrokï¼‰

### é£ä¹¦ Lark é›†æˆ
```bash
cargo run --bin bee-lark --features lark
```

### WebSocket ç½‘å…³
```bash
cargo run --bin bee-gateway --features gateway
```
> Hub-Spoke æ¶æ„ï¼Œæ”¯æŒå¤šå®¢æˆ·ç«¯å¹¶å‘è¿æ¥ã€ä¼šè¯æŒä¹…åŒ–ã€ä»»åŠ¡é˜Ÿåˆ—

---

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| `DEEPSEEK_API_KEY` | DeepSeek API Key | â­ æ¨è |
| `DEEPSEEK_MODEL` | `deepseek-chat`ï¼ˆé»˜è®¤ï¼‰/ `deepseek-reasoner` | - |
| `OPENAI_API_KEY` | OpenAI API Key | å¤‡é€‰ |
| `ANTHROPIC_API_KEY` | Claude API Key | å¯é€‰ |
| `GOOGLE_API_KEY` | Gemini API Key | å¯é€‰ |
| `DASHSCOPE_API_KEY` | é€šä¹‰åƒé—® API Key | å¯é€‰ |
| `MOONSHOT_API_KEY` | Kimi API Key | å¯é€‰ |
| `ZHIPU_API_KEY` | GLM API Key | å¯é€‰ |
| ï¼ˆæ— éœ€é…ç½®ï¼‰ | Mock LLM ç¦»çº¿æ¨¡å¼ | æµ‹è¯• |

**ç¤ºä¾‹** - ä½¿ç”¨ DeepSeek æ€è€ƒæ¨¡å¼ï¼š
```bash
export DEEPSEEK_API_KEY=sk-xxx
export DEEPSEEK_MODEL=deepseek-reasoner
cargo run
```

### é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `config/default.toml` | ä¸»é…ç½®ï¼ˆLLMã€å·¥å…·ç™½åå•ã€è®°å¿†ã€è¿›åŒ–ã€å®‰å…¨ç­‰ï¼‰ |
| `config/models.toml` | å¤šæ¨¡å‹æ³¨å†Œï¼ˆGPT-5.x / DeepSeek V3.2 / Claude 4.6 / Gemini 3 / Qwen 3.5 ç­‰ï¼‰ |
| `config/assistants.toml` | å¤šåŠ©æ‰‹å®šä¹‰ï¼ˆé€šç”¨åŠ©æ‰‹ã€è‡ªåª’ä½“ã€å­¦ä¹ ã€æé’±ç­‰ï¼‰ |
| `config/prompts/` | System Prompt æ¨¡æ¿ |
| `config/skills/` | æŠ€èƒ½æ’ä»¶å®šä¹‰ï¼ˆæœç´¢ã€å†™ä½œã€çˆ†æ¬¾ã€Claude é£æ ¼ç­‰ï¼‰ |
| `workspace/` | æ²™ç®±å·¥ä½œç›®å½• |

### å¤šæ¨¡å‹åˆ‡æ¢

ç¼–è¾‘ `config/default.toml`:
```toml
[llm]
provider = "deepseek"  # æˆ– "openai"
model = "deepseek-reasoner"  # æˆ– "deepseek-chat"
```

æˆ–åœ¨ `config/models.toml` ä¸­æ³¨å†Œæ›´å¤šæ¨¡å‹ï¼ŒWeb ç•Œé¢å¯åŠ¨æ€åˆ‡æ¢ã€‚

---

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      äº¤äº’å±‚ (Interface)                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ TUI   â”‚ Web UI   â”‚ WhatsApp  â”‚ Lark   â”‚   Gateway    â”‚   â”‚
â”‚   â”‚Ratatuiâ”‚ Axum SSE â”‚ Webhook   â”‚Webhook â”‚ WebSocket    â”‚   â”‚
â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚        â”‚           â”‚         â”‚          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                       â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Headless Agent Runtime     â”‚  â”‚    Gateway (Hub-Spoke)   â”‚
â”‚  create_agent â†’ process_message â”‚  â”‚  Session + Task Queue    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               æ ¸å¿ƒç¼–æ’ (Orchestrator)                         â”‚
â”‚  AgentBuilder + Session Supervisor + Recovery + Task Schedulerâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è®¤çŸ¥å±‚        â”‚   â”‚     å·¥å…·å±‚        â”‚   â”‚      è®°å¿†å±‚         â”‚
â”‚ Planner        â”‚   â”‚ æ²™ç®±æ–‡ä»¶ç³»ç»Ÿ      â”‚   â”‚ å¯¹è¯è®°å¿†(æ™ºèƒ½å‰ªæ)   â”‚
â”‚ Critic         â”‚   â”‚ Shell ç™½åå•      â”‚   â”‚ ä¸­æœŸå·¥ä½œåŒº           â”‚
â”‚ ReAct Loop     â”‚   â”‚ ä»£ç è¯»å†™/å®¡æŸ¥     â”‚   â”‚ é•¿æœŸè®°å¿†(æ–‡ä»¶+å‘é‡)  â”‚
â”‚ (20 æ­¥ä¸Šé™)    â”‚   â”‚ Git Diff/Commit   â”‚   â”‚ ç”¨æˆ·è®°å¿†             â”‚
â”‚                â”‚   â”‚ Web/æ·±åº¦æœç´¢      â”‚   â”‚ å­¦ä¹ ç»éªŒ(Learnings)  â”‚
â”‚                â”‚   â”‚ çŸ¥è¯†å›¾è°±          â”‚   â”‚ RAG Pipeline         â”‚
â”‚                â”‚   â”‚ æŠ¥å‘Šç”Ÿæˆå™¨        â”‚   â”‚ Token Budget         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                          â”‚                          â”‚
    â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LLM å±‚       â”‚   â”‚   æŠ€èƒ½å±‚          â”‚   â”‚     æŒä¹…åŒ–å±‚        â”‚
â”‚ å¤šæ¨¡å‹è·¯ç”±     â”‚   â”‚ TOML æŠ€èƒ½å®šä¹‰     â”‚   â”‚ SQLite (åŒæ­¥/å¼‚æ­¥)  â”‚
â”‚ ä»»åŠ¡åˆ†ç±»       â”‚   â”‚ åŠ¨æ€åŠ è½½/é€‰æ‹©     â”‚   â”‚ æ–‡ä»¶ (å¼‚æ­¥ I/O)     â”‚
â”‚ é‡è¯•ç­–ç•¥       â”‚   â”‚ å·¥å…·æ³¨å†Œ          â”‚   â”‚ å‘é‡å¿«ç…§             â”‚
â”‚ Embedding      â”‚   â”‚                   â”‚   â”‚ Markdown Store       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    è‡ªæˆ‘è¿›åŒ–å¼•æ“       â”‚
                   â”‚ åˆ†æ â†’ è§„åˆ’ â†’ æ‰§è¡Œ   â”‚
                   â”‚ è°ƒåº¦ + å®¡æ‰¹ + å›æ»š   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®ç»„ä»¶

| ç»„ä»¶ | è¯´æ˜ |
|------|------|
| **AgentBuilder** | ç»Ÿä¸€ Agent ç»„ä»¶æ„å»ºï¼Œæ”¯æŒè‡ªå®šä¹‰ Prompt å’Œé…ç½®å‚æ•°æ³¨å…¥ |
| **å¤šæ¨¡å‹è·¯ç”±** | æ ¹æ®ä»»åŠ¡ç±»å‹ï¼ˆä»£ç /æ¨ç†/æ‘˜è¦ï¼‰è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¨¡å‹ |
| **RAG Pipeline** | æ–‡æ¡£åˆ†å— â†’ å‘é‡å­˜å‚¨ â†’ æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ RRFï¼‰â†’ ä¸Šä¸‹æ–‡å¢å¼º |
| **æ™ºèƒ½å‰ªæ** | å¯¹è¯è¶…é•¿æ—¶ä¿ç•™ç³»ç»Ÿæ¶ˆæ¯ï¼Œä¼˜å…ˆç§»é™¤å·¥å…·è¾“å‡ºï¼ŒToken Budget ç®¡ç† |
| **æŠ€èƒ½ç³»ç»Ÿ** | TOML å®šä¹‰æŠ€èƒ½ï¼ŒSkillSelector æŒ‰ä»»åŠ¡é€‰æ‹©ï¼ŒSkillLoader åŠ¨æ€æ³¨å†Œå·¥å…· |
| **è‡ªæˆ‘è¿›åŒ–** | Analyzer åˆ†æä»£ç è´¨é‡ â†’ Planner ç”Ÿæˆæ”¹è¿›è®¡åˆ’ â†’ Executor æ‰§è¡Œ â†’ Git æäº¤ |
| **Gateway** | Hub-Spoke WebSocket ç½‘å…³ï¼Œä¼šè¯æŒä¹…åŒ–ï¼Œä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æˆ·è®°å¿†ç®¡ç† |
| **ä¼˜é›…å…³é—­** | SIGINT/SIGTERM ä¿¡å·å¤„ç†ï¼Œèµ„æºæ¸…ç† |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
bee/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs            # TUI å…¥å£
â”‚   â”œâ”€â”€ lib.rs             # Library å¯¼å‡º
â”‚   â”œâ”€â”€ agent.rs           # Headless Agent è¿è¡Œæ—¶ï¼ˆä¾›é TUI å‰ç«¯è°ƒç”¨ï¼‰
â”‚   â”œâ”€â”€ config.rs          # åº”ç”¨é…ç½®åŠ è½½
â”‚   â”œâ”€â”€ bin/               # é™„åŠ äºŒè¿›åˆ¶
â”‚   â”‚   â”œâ”€â”€ web.rs             # Web æœåŠ¡å™¨ (Axum SSE)
â”‚   â”‚   â”œâ”€â”€ whatsapp.rs        # WhatsApp Webhook
â”‚   â”‚   â”œâ”€â”€ lark.rs            # é£ä¹¦ Webhook
â”‚   â”‚   â”œâ”€â”€ gateway.rs         # WebSocket ç½‘å…³
â”‚   â”‚   â””â”€â”€ evolution_test.rs  # è¿›åŒ–å¼•æ“æµ‹è¯•
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒç¼–æ’
â”‚   â”‚   â”œâ”€â”€ orchestrator.rs    # ä¼šè¯ç¼–æ’å™¨
â”‚   â”‚   â”œâ”€â”€ builder.rs         # AgentBuilder ç»Ÿä¸€æ„å»º
â”‚   â”‚   â”œâ”€â”€ session_supervisor.rs  # ä¼šè¯ç›‘ç®¡
â”‚   â”‚   â”œâ”€â”€ task_scheduler.rs  # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”‚   â”œâ”€â”€ recovery.rs        # æ¢å¤å¼•æ“
â”‚   â”‚   â”œâ”€â”€ shutdown.rs        # ä¼˜é›…å…³é—­
â”‚   â”‚   â”œâ”€â”€ state.rs           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ error.rs           # é”™è¯¯ç±»å‹
â”‚   â”œâ”€â”€ llm/               # LLM å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ deepseek.rs        # DeepSeek å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ openai.rs          # OpenAI å…¼å®¹å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ router.rs          # å¤šæ¨¡å‹è·¯ç”±å™¨
â”‚   â”‚   â”œâ”€â”€ embedding.rs       # Embedding å‘é‡åŒ–
â”‚   â”‚   â”œâ”€â”€ traits.rs          # LlmError + é‡è¯•ç­–ç•¥
â”‚   â”‚   â””â”€â”€ mock.rs            # Mock æµ‹è¯•å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ memory/            # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ conversation.rs    # æ™ºèƒ½å‰ªæå¯¹è¯è®°å¿†
â”‚   â”‚   â”œâ”€â”€ working.rs         # ä¸­æœŸå·¥ä½œåŒº
â”‚   â”‚   â”œâ”€â”€ long_term.rs       # é•¿æœŸè®°å¿†ï¼ˆæ–‡ä»¶ + å‘é‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ user_memory.rs     # ç”¨æˆ·ä¸ªæ€§åŒ–è®°å¿†
â”‚   â”‚   â”œâ”€â”€ learnings.rs       # å­¦ä¹ ç»éªŒç§¯ç´¯
â”‚   â”‚   â”œâ”€â”€ rag.rs             # RAG Pipeline
â”‚   â”‚   â”œâ”€â”€ tokenizer.rs       # ä¸­æ–‡åˆ†è¯ (jieba-rs)
â”‚   â”‚   â”œâ”€â”€ token_budget.rs    # Token é¢„ç®—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ markdown_store.rs  # Markdown å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ persistence.rs     # åŒæ­¥æŒä¹…åŒ–
â”‚   â”‚   â”œâ”€â”€ async_persistence.rs  # sqlx å¼‚æ­¥ SQLite
â”‚   â”‚   â””â”€â”€ async_io.rs        # å¼‚æ­¥æ–‡ä»¶ I/O
â”‚   â”œâ”€â”€ react/             # ReAct è®¤çŸ¥å¾ªç¯
â”‚   â”‚   â”œâ”€â”€ loop_.rs           # ReAct ä¸»å¾ªç¯
â”‚   â”‚   â”œâ”€â”€ planner.rs         # è§„åˆ’å™¨
â”‚   â”‚   â”œâ”€â”€ critic.rs          # æ‰¹è¯„å™¨
â”‚   â”‚   â”œâ”€â”€ memory.rs          # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â””â”€â”€ events.rs          # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ skills/            # æŠ€èƒ½ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ loader.rs          # æŠ€èƒ½åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ selector.rs        # æŠ€èƒ½é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ tools/             # å·¥å…·ç®± (27 ä¸ªå·¥å…·)
â”‚   â”‚   â”œâ”€â”€ executor.rs        # å·¥å…·æ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ registry.rs        # å·¥å…·æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ schema.rs          # JSON Schema å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ filesystem.rs      # æ–‡ä»¶æ“ä½œ (cat, ls)
â”‚   â”‚   â”œâ”€â”€ shell.rs           # Shell å‘½ä»¤ (ç™½åå•)
â”‚   â”‚   â”œâ”€â”€ search.rs          # Web æœç´¢
â”‚   â”‚   â”œâ”€â”€ deep_search.rs     # æ·±åº¦ç ”ç©¶
â”‚   â”‚   â”œâ”€â”€ code_read.rs       # ä»£ç é˜…è¯»
â”‚   â”‚   â”œâ”€â”€ code_write.rs      # ä»£ç ç¼–å†™
â”‚   â”‚   â”œâ”€â”€ code_edit.rs       # ä»£ç ç¼–è¾‘
â”‚   â”‚   â”œâ”€â”€ code_grep.rs       # ä»£ç æœç´¢
â”‚   â”‚   â”œâ”€â”€ code_review.rs     # ä»£ç å®¡æŸ¥
â”‚   â”‚   â”œâ”€â”€ git_diff.rs        # Git Diff
â”‚   â”‚   â”œâ”€â”€ git_commit.rs      # Git Commit
â”‚   â”‚   â”œâ”€â”€ knowledge_graph.rs # çŸ¥è¯†å›¾è°±
â”‚   â”‚   â”œâ”€â”€ report_generator.rs# æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ source_validator.rs# ä¿¡æ¯æºéªŒè¯
â”‚   â”‚   â”œâ”€â”€ test_run.rs        # æµ‹è¯•è¿è¡Œ
â”‚   â”‚   â”œâ”€â”€ test_check.rs      # æµ‹è¯•æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ browser.rs         # æµè§ˆå™¨æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ echo.rs            # Echo è°ƒè¯•
â”‚   â”‚   â”œâ”€â”€ create.rs          # æ–‡ä»¶åˆ›å»º
â”‚   â”‚   â”œâ”€â”€ create_group.rs    # åˆ†ç»„åˆ›å»º
â”‚   â”‚   â”œâ”€â”€ send.rs            # æ¶ˆæ¯å‘é€
â”‚   â”‚   â”œâ”€â”€ list_agents.rs     # åˆ—å‡ºåŠ©æ‰‹
â”‚   â”‚   â””â”€â”€ plugin.rs          # æ’ä»¶å·¥å…·
â”‚   â”œâ”€â”€ evolution/         # è‡ªæˆ‘è¿›åŒ–å¼•æ“
â”‚   â”‚   â”œâ”€â”€ analyzer.rs        # ä»£ç è´¨é‡åˆ†æ
â”‚   â”‚   â”œâ”€â”€ planner.rs         # æ”¹è¿›è§„åˆ’
â”‚   â”‚   â”œâ”€â”€ executor.rs        # è®¡åˆ’æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ engine.rs          # è¿›åŒ–å¼•æ“
â”‚   â”‚   â”œâ”€â”€ loop_.rs           # è¿›åŒ–å¾ªç¯
â”‚   â”‚   â””â”€â”€ types.rs           # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ gateway/           # WebSocket ç½‘å…³ (feature-gated)
â”‚   â”‚   â”œâ”€â”€ hub.rs             # Hub ä¸­å¿ƒèŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ spoke.rs           # Spoke è¾¹ç¼˜èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ session.rs         # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ session_store.rs   # ä¼šè¯å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ persistent_session.rs  # æŒä¹…åŒ–ä¼šè¯
â”‚   â”‚   â”œâ”€â”€ task_queue.rs      # ä»»åŠ¡é˜Ÿåˆ—
â”‚   â”‚   â”œâ”€â”€ runtime.rs         # è¿è¡Œæ—¶
â”‚   â”‚   â”œâ”€â”€ intent.rs          # æ„å›¾è§£æ
â”‚   â”‚   â””â”€â”€ message.rs         # æ¶ˆæ¯ç±»å‹
â”‚   â”œâ”€â”€ integrations/      # ç¬¬ä¸‰æ–¹é›†æˆ
â”‚   â”‚   â”œâ”€â”€ whatsapp.rs        # WhatsApp API
â”‚   â”‚   â””â”€â”€ lark.rs            # é£ä¹¦ API
â”‚   â”œâ”€â”€ plugins/           # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ observability/     # å¯è§‚æµ‹æ€§ (Metrics + Tracing)
â”‚   â””â”€â”€ ui/                # TUI ç•Œé¢ (Ratatui)
â”œâ”€â”€ static/                # Web UI å‰ç«¯
â”œâ”€â”€ config/                # é…ç½®ä¸ Prompt æ¨¡æ¿
â”‚   â”œâ”€â”€ default.toml           # ä¸»é…ç½®
â”‚   â”œâ”€â”€ models.toml            # æ¨¡å‹æ³¨å†Œ
â”‚   â”œâ”€â”€ assistants.toml        # åŠ©æ‰‹å®šä¹‰
â”‚   â”œâ”€â”€ prompts/               # System Prompt æ¨¡æ¿
â”‚   â””â”€â”€ skills/                # æŠ€èƒ½æ’ä»¶ (æœç´¢/å†™ä½œ/çˆ†æ¬¾/Claude ç­‰)
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ workspace/             # æ²™ç®±å·¥ä½œç›®å½•
```

---

## ğŸ”¬ æŠ€æœ¯äº®ç‚¹

### RAG æ£€ç´¢å¢å¼ºç”Ÿæˆ

```rust
// UTF-8 å®‰å…¨çš„æ–‡æ¡£åˆ†å—
let chunker = Chunker::new(ChunkingConfig {
    chunk_size: 500,
    overlap: 50,
    ..Default::default()
});
let chunks = chunker.chunk("doc_id", "ä½ çš„æ–‡æ¡£å†…å®¹...");

// æ··åˆæ£€ç´¢ï¼ˆå‘é‡ + å…³é”®è¯ï¼ŒRRF èåˆï¼‰
let results = vector_store.hybrid_search(&query_embedding, "å…³é”®è¯", 10);
```

### å¤šæ¨¡å‹æ™ºèƒ½è·¯ç”±

```rust
// æ ¹æ®ä»»åŠ¡ç±»å‹è‡ªåŠ¨é€‰æ‹©æ¨¡å‹
let router = ModelRouter::new()
    .add_model("gpt-4", gpt4_client, ModelCapabilities { code_score: 0.9, .. })
    .add_model("deepseek", deepseek_client, ModelCapabilities { reasoning_score: 0.95, .. });

// ä»£ç ä»»åŠ¡ â†’ GPT-4ï¼Œæ¨ç†ä»»åŠ¡ â†’ DeepSeek
let client = RoutingLlmClient::new(router, RoutingStrategy::BestQuality);
```

### è‡ªæˆ‘è¿›åŒ–å¼•æ“

```rust
// è‡ªä¸»è¿­ä»£ï¼šåˆ†æ â†’ è§„åˆ’ â†’ æ‰§è¡Œ â†’ æäº¤
let config = EvolutionConfig {
    max_iterations: 10,
    target_score_threshold: 0.8,
    auto_commit: true,
    focus_areas: vec!["performance", "readability", "testing"],
    safe_mode: SafeMode::Strict,
    ..Default::default()
};
let evolution = EvolutionLoop::new(config);
evolution.run().await?;
```

### æ™ºèƒ½å¯¹è¯å‰ªæ

```rust
// ä¿ç•™ç³»ç»Ÿæ¶ˆæ¯ï¼Œä¼˜å…ˆç§»é™¤å·¥å…·è¾“å‡º
let config = PruneConfig {
    preserve_system: true,
    tool_result_ratio: 0.3,  // å·¥å…·ç»“æœæœ€å¤šå  30%
    smart_prune: true,
};
let pruned = conversation.prune();  // è¿”å›è¢«ç§»é™¤çš„æ¶ˆæ¯ä¾›é•¿æœŸè®°å¿†ä½¿ç”¨
```

---

## ğŸ“š æ–‡æ¡£

### é¡¹ç›®æ–‡æ¡£
- [ğŸ“– ä½¿ç”¨æ–‡æ¡£](docs/ä½¿ç”¨æ–‡æ¡£.md) - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- [ğŸŒ Web UI æ–‡æ¡£](docs/WEBUI.md) - Web ç•Œé¢é…ç½®
- [ğŸ’¬ WhatsApp æ–‡æ¡£](docs/WHATSAPP.md) - WhatsApp é›†æˆæŒ‡å—
- [ğŸ”— Lark é£ä¹¦æ–‡æ¡£](docs/LARK.md) - é£ä¹¦æœºå™¨äººé›†æˆ
- [ğŸŒ‰ ç½‘å…³æ–‡æ¡£](docs/GATEWAY.md) - WebSocket ç½‘å…³
- [ğŸ“‘ æ–‡æ¡£å¯¼èˆª](docs/README.md) - å®Œæ•´æ–‡æ¡£ç´¢å¼•

### æ¶æ„ä¸è®¾è®¡
- [ğŸ—ï¸ æ¶æ„æ”¹è¿›](docs/ARCHITECTURE_IMPROVEMENTS.md) - å››é˜¶æ®µæ¶æ„æ¼”è¿›è®¡åˆ’
- [ğŸ” æ¶æ„åˆ†æ](docs/ARCHITECTURE_ANALYSIS.md) - æ¶æ„åˆ†ææŠ¥å‘Š
- [ğŸ“ æ¶æ„ç™½çš®ä¹¦](docs/Rustä¸ªäººæ™ºèƒ½ä½“ç³»ç»Ÿ(Bee)-æ¶æ„è®¾è®¡ç™½çš®ä¹¦.md) - ç³»ç»Ÿè®¾è®¡ç™½çš®ä¹¦

### åŠŸèƒ½æ¨¡å—
- [ğŸ“š æ·±åº¦ç ”ç©¶](docs/DEEP_RESEARCH.md) - æ·±åº¦ç ”ç©¶åŠŸèƒ½å®Œæ•´æŒ‡å—
- [ğŸš€ æ·±åº¦ç ”ç©¶å¿«é€Ÿå¼€å§‹](docs/DEEP_RESEARCH_QUICKSTART.md) - å¿«é€Ÿä¸Šæ‰‹
- [ğŸ§  è®°å¿†ç³»ç»Ÿ](docs/MEMORY.md) - åˆ†å±‚è®°å¿†æ¶æ„
- [ğŸ“– å­¦ä¹ ç»éªŒ](docs/LEARNINGS.md) - ä»å¤±è´¥ä¸­å­¦ä¹ 
- [ğŸ§© æŠ€èƒ½ç³»ç»Ÿ](docs/SKILLS.md) - æŠ€èƒ½æ’ä»¶å¼€å‘æŒ‡å—
- [ğŸ”„ è‡ªæˆ‘è¿›åŒ–](docs/EVOLUTION.md) - è‡ªæˆ‘è¿›åŒ–æœºåˆ¶
- [ğŸ”„ è¿›åŒ–è®¾è®¡](docs/EVOLUTION_DESIGN.md) - è¿›åŒ–å¼•æ“è®¾è®¡æ–‡æ¡£

### AI è¡Œä¸ºæ”¹è¿›
- [ğŸ¯ AI æ”¹è¿›è®¡åˆ’](docs/ai-improvement-plan.md) - æ”¹è¿›è·¯çº¿å›¾
- [ğŸ“Š AI æ”¹è¿›è·Ÿè¸ª](docs/ai-improvement-tracking.md) - æ”¹è¿›è¿›åº¦è·Ÿè¸ª
- [âš¡ å¿«é€Ÿå‚è€ƒ](docs/ai-quick-reference.md) - æ—¥å¸¸äº¤äº’é€ŸæŸ¥å¡
- [âœ… è‡ªæ£€æ¸…å•](docs/ai-self-check-workflow.md) - å¯æ‰§è¡Œæ£€æŸ¥æ¸…å•

---

## ğŸ› ï¸ å¼€å‘

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
cargo run

# ç”Ÿäº§æ„å»º
cargo build --release

# è¿è¡Œæµ‹è¯•ï¼ˆ96 ä¸ªæµ‹è¯•ï¼‰
cargo test

# ä»£ç æ£€æŸ¥
cargo clippy
cargo fmt
```

### åŠŸèƒ½å¼€å…³

```bash
# Web ç•Œé¢
cargo run --bin bee-web --features web

# WhatsApp é›†æˆ
cargo run --bin bee-whatsapp --features whatsapp

# é£ä¹¦/Lark é›†æˆ
cargo run --bin bee-lark --features lark

# WebSocket ç½‘å…³ï¼ˆå«å¼‚æ­¥ SQLiteï¼‰
cargo run --bin bee-gateway --features gateway

# æµè§ˆå™¨æ§åˆ¶ï¼ˆéœ€å®‰è£… Chrome/Chromiumï¼‰
cargo run --features browser

# å¼‚æ­¥ SQLite æŒä¹…åŒ–
cargo build --features async-sqlite

# è¿›åŒ–å¼•æ“æµ‹è¯•
cargo run --bin bee-evolution
```

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | è¯´æ˜ |
|------|------|
| `core::builder` | AgentBuilder ç»Ÿä¸€ç»„ä»¶æ„å»º |
| `core::task_scheduler` | ä»»åŠ¡è°ƒåº¦ä¸é˜Ÿåˆ—ç®¡ç† |
| `core::session_supervisor` | ä¼šè¯ç”Ÿå‘½å‘¨æœŸç›‘ç®¡ |
| `llm::router` | å¤šæ¨¡å‹è·¯ç”±ï¼ŒæŒ‰ä»»åŠ¡ç±»å‹è‡ªåŠ¨é€‰æ‹©æ¨¡å‹ |
| `llm::embedding` | å‘é‡åŒ–åµŒå…¥ï¼ˆEmbedding APIï¼‰ |
| `memory::rag` | RAG Pipelineï¼Œæ–‡æ¡£åˆ†å—+æ··åˆæ£€ç´¢ |
| `memory::long_term` | é•¿æœŸè®°å¿†ï¼ˆæ–‡ä»¶å­˜å‚¨ + å‘é‡æ£€ç´¢ï¼‰ |
| `memory::user_memory` | ç”¨æˆ·ä¸ªæ€§åŒ–è®°å¿†ç®¡ç† |
| `memory::tokenizer` | ä¸­è‹±æ–‡æ™ºèƒ½åˆ†è¯ï¼ˆjieba-rsï¼‰ |
| `memory::token_budget` | Token é¢„ç®—ä¸ä¸Šä¸‹æ–‡çª—å£ç®¡ç† |
| `skills` | æŠ€èƒ½å®šä¹‰ã€åŠ è½½ä¸è‡ªåŠ¨é€‰æ‹© |
| `evolution` | è‡ªæˆ‘è¿›åŒ–å¼•æ“ï¼ˆåˆ†æ/è§„åˆ’/æ‰§è¡Œï¼‰ |
| `gateway` | Hub-Spoke WebSocket ç½‘å…³ |
| `observability` | Metrics + Tracing Spans |

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **æ²™ç®±æ–‡ä»¶ç³»ç»Ÿ**: åªèƒ½è®¿é—® `workspace/` ç›®å½•
- **Shell ç™½åå•**: ä»…å…è®¸é…ç½®çš„å‘½ä»¤ï¼ˆé»˜è®¤: ls, grep, cat, head, tail, wc, find, cargo, rustcï¼‰
- **åŸŸåç™½åå•**: Web æœç´¢é™åˆ¶åœ¨å…è®¸åŸŸåå†…
- **è¿›åŒ–å®‰å…¨**: strict/balanced/permissive ä¸‰çº§å®‰å…¨æ¨¡å¼ï¼Œæ”¯æŒå›æ»šä¸å¤‡ä»½
- **API Key éš”ç¦»**: ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œä¸å†™å…¥é…ç½®æ–‡ä»¶

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ Issue å’Œ PRï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåˆ†æ”¯ (`git checkout -b feature/amazing`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing`)
5. åˆ›å»º Pull Request

---

## ğŸ“„ è®¸å¯è¯

[MIT](LICENSE) Â© Bee Team

---

<div align="center">
  <sub>Built with ğŸ¦€ Rust</sub>
</div>
