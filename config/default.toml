[app]
name = "Bee"
workspace_root = "./workspace"
max_context_turns = 20

[llm]
# 优先级: DEEPSEEK_API_KEY > OPENAI_API_KEY
# DeepSeek: https://api.deepseek.com
# - deepseek-chat: 常规对话，响应快
# - deepseek-reasoner: 思考模式（DeepSeek-R1），适合复杂推理、代码、数学
# OpenAI:   https://api.openai.com/v1, 模型 gpt-4o-mini 等
provider = "deepseek"
model = "deepseek-reasoner"
base_url = "https://api.deepseek.com"

[llm.deepseek]
model = "deepseek-reasoner"
# 可选 deepseek-chat（常规）、deepseek-reasoner（思考/推理，更强）

[llm.openai]
model = "gpt-4o-mini"

[llm.timeouts]
request = 60
stream = 120

[tools]
filesystem_root = "./workspace"
tool_timeout_secs = 30

[tools.shell]
allowed_commands = ["ls", "grep", "cat", "head", "tail", "wc", "find", "cargo", "rustc"]

[tools.search]
timeout_secs = 15
max_result_chars = 8000
allowed_domains = [
  "en.wikipedia.org", "zh.wikipedia.org", "ja.wikipedia.org",
  "www.baidu.com", "baike.baidu.com",
  "www.jd.com", "item.jd.com",
  "docs.rs", "github.com", "stackoverflow.com",
  "news.google.com", "developer.mozilla.org", "arxiv.org"
]

# 自我进化（参见 docs/EVOLUTION.md）
[evolution]
# 当模型调用不存在的工具（HallucinatedTool）时，是否自动向 memory/lessons.md 追加一条教训（默认 true）
auto_lesson_on_hallucination = true
# 是否将工具调用成功也写入 memory/procedural.md（§3.5 工具统计；默认 false 减少噪音）
record_tool_success = false

# 心跳机制（仅 bee-web：后台自主循环，思考现状 → 检查待办 → 反思）
[heartbeat]
enabled = false
interval_secs = 300
